<ion-header>
  <ion-toolbar>
    <ion-back-button slot="start" defaultHref="/home"></ion-back-button>
    <ion-title>Pomodoro</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- Study Duration Selector -->
  <ion-item button detail="true" (click)="durationSelect.open()">
    <ion-label>Study Duration</ion-label>

    <div slot="end" style="display:flex; align-items:center; gap:6px;">
      {{ selectedFocusMinutes < 1 ? (selectedFocusMinutes * 60) + ' seconds'
                                  : selectedFocusMinutes + ' minutes' }}
      <ion-icon name="chevron-down-outline"></ion-icon>
    </div>

    <ion-select #durationSelect interface="popover" [(ngModel)]="selectedFocusMinutes" style="display:none;">
      <ion-select-option value="0.5">30 seconds (test)</ion-select-option>
      <ion-select-option value="15">15 minutes</ion-select-option>
      <ion-select-option value="20">20 minutes</ion-select-option>
      <ion-select-option value="30">30 minutes</ion-select-option>
      <ion-select-option value="60">1 hour</ion-select-option>
    </ion-select>
  </ion-item>

  <!-- Break Duration Selector -->
  <ion-item button detail="true" (click)="breakSelect.open()">
    <ion-label>Break Duration</ion-label>

    <div slot="end" style="display:flex; align-items:center; gap:6px;">
      {{ breakMinutes < 1 ? (breakMinutes * 60) + ' seconds'
                          : breakMinutes + ' minutes' }}
      <ion-icon name="chevron-down-outline"></ion-icon>
    </div>

    <ion-select #breakSelect interface="popover" [(ngModel)]="breakMinutes" style="display:none;">
      <ion-select-option value="0.5">30 seconds (test)</ion-select-option>
      <ion-select-option value="2">2 minutes</ion-select-option>
      <ion-select-option value="3">3 minutes</ion-select-option>
      <ion-select-option value="5">5 minutes</ion-select-option>
      <ion-select-option value="10">10 minutes</ion-select-option>
    </ion-select>
  </ion-item>

  <!-- Timer Display -->
  <div style="text-align:center; margin-top:40px;">
    <h1 style="font-size: 64px; margin: 0;">
      {{ minutes }}:{{ seconds }}
    </h1>

    <p *ngIf="isFocusSession" style="font-size:20px; margin-top:10px;">
      Focus Session
    </p>

    <p *ngIf="!isFocusSession" style="font-size:20px; margin-top:10px;">
      Break Session
    </p>

    <!-- Button Row (Aligned Perfectly) -->
    <div style="display:flex; justify-content:center; gap:15px; margin-top:25px;">

      <!-- Start Button -->
      <ion-button
        color="primary"
        size="small"
        (click)="startFocusTimer()"
      >
        Start
      </ion-button>

      <!-- Pause / Resume Button -->
      <ion-button
        *ngIf="timeLeft > 0 && isFocusSession"
        color="medium"
        size="small"
        (click)="pauseTimer()"
      >
        {{ isPaused ? 'Resume' : 'Pause' }}
      </ion-button>

    </div>
  </div>

</ion-content>